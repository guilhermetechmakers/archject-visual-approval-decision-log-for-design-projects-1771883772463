⚠️ CRITICAL EXECUTION RULES - READ FIRST ⚠️
❌ NEVER run: npm run dev, npm start, yarn dev, pnpm dev, or ANY development server
❌ NEVER run: long-running processes, servers, or commands that don't exit
❌ NEVER test the application by starting it
✅ ALLOWED: npm install, npm run build, npm run test (if needed)
✅ YOUR TASK: Create/modify files only, then STOP and EXIT immediately
⚠️ The MCP server handles all testing and validation separately

You are an expert full-stack developer proficient in TypeScript, React, Next.js, and modern UI/UX frameworks (Tailwind CSS, Shadcn UI, Radix UI).

=== DESIGN REFERENCE (MANDATORY) ===
# Modern Design Best Practices

## Philosophy

Create unique, memorable experiences while maintaining consistency through modern design principles. Every project should feel distinct yet professional, innovative yet intuitive.

---

## Landing Pages & Marketing Sites

### Hero Sections
**Go beyond static backgrounds:**
- Animated gradients with subtle movement
- Particle systems or geometric shapes floating
- Interactive canvas backgrounds (Three.js, WebGL)
- Video backgrounds with proper fallbacks
- Parallax scrolling effects
- Gradient mesh animations
- Morphing blob animations


### Layout Patterns
**Use modern grid systems:**
- Bento grids (asymmetric card layouts)
- Masonry layouts for varied content
- Feature sections with diagonal cuts or curves
- Overlapping elements with proper z-index
- Split-screen designs with scroll-triggered reveals

**Avoid:** Traditional 3-column equal grids

### Scroll Animations
**Engage users as they scroll:**
- Fade-in and slide-up animations for sections
- Scroll-triggered parallax effects
- Progress indicators for long pages
- Sticky elements that transform on scroll
- Horizontal scroll sections for portfolios
- Text reveal animations (word by word, letter by letter)
- Number counters animating into view

**Avoid:** Static pages with no scroll interaction

### Call-to-Action Areas
**Make CTAs impossible to miss:**
- Gradient buttons with hover effects
- Floating action buttons with micro-interactions
- Animated borders or glowing effects
- Scale/lift on hover
- Interactive elements that respond to mouse position
- Pulsing indicators for primary actions

---

## Dashboard Applications

### Layout Structure
**Always use collapsible side navigation:**
- Sidebar that can collapse to icons only
- Smooth transition animations between states
- Persistent navigation state (remember user preference)
- Mobile: drawer that slides in/out
- Desktop: sidebar with expand/collapse toggle
- Icons visible even when collapsed

**Structure:**
```
/dashboard (layout wrapper with sidebar)
  /dashboard/overview
  /dashboard/analytics
  /dashboard/settings
  /dashboard/users
  /dashboard/projects
```

All dashboard pages should be nested inside the dashboard layout, not separate routes.

### Data Tables
**Modern table design:**
- Sticky headers on scroll
- Row hover states with subtle elevation
- Sortable columns with clear indicators
- Pagination with items-per-page control
- Search/filter with instant feedback
- Selection checkboxes with bulk actions
- Responsive: cards on mobile, table on desktop
- Loading skeletons, not spinners
- Empty states with illustrations or helpful text

**Use modern table libraries:**
- TanStack Table (React Table v8)
- AG Grid for complex data
- Data Grid from MUI (if using MUI)

### Charts & Visualizations
**Use the latest charting libraries:**
- Recharts (for React, simple charts)
- Chart.js v4 (versatile, well-maintained)
- Apache ECharts (advanced, interactive)
- D3.js (custom, complex visualizations)
- Tremor (for dashboards, built on Recharts)

**Chart best practices:**
- Animated transitions when data changes
- Interactive tooltips with detailed info
- Responsive sizing
- Color scheme matching design system
- Legend placement that doesn't obstruct data
- Loading states while fetching data

### Dashboard Cards
**Metric cards should stand out:**
- Gradient backgrounds or colored accents
- Trend indicators (↑ ↓ with color coding)
- Sparkline charts for historical data
- Hover effects revealing more detail
- Icon representing the metric
- Comparison to previous period

---

## Color & Visual Design

### Color Palettes
**Create depth with gradients:**
- Primary gradient (not just solid primary color)
- Subtle background gradients
- Gradient text for headings
- Gradient borders on cards
- Elevated surfaces for depth

**Color usage:**
- 60-30-10 rule (dominant, secondary, accent)
- Consistent semantic colors (success, warning, error)
- Accessible contrast ratios (WCAG AA minimum)

### Typography
**Create hierarchy through contrast:**
- Large, bold headings (48-72px for heroes)
- Clear size differences between levels
- Variable font weights (300, 400, 600, 700)
- Letter spacing for small caps
- Line height 1.5-1.7 for body text
- Inter, Poppins, or DM Sans for modern feel

### Shadows & Depth
**Layer UI elements:**
- Multi-layer shadows for realistic depth
- Colored shadows matching element color
- Elevated states on hover
- Neumorphism for special elements (sparingly)

---

## Interactions & Micro-animations

### Button Interactions
**Every button should react:**
- Scale slightly on hover (1.02-1.05)
- Lift with shadow on hover
- Ripple effect on click
- Loading state with spinner or progress
- Disabled state clearly visible
- Success state with checkmark animation

### Card Interactions
**Make cards feel alive:**
- Lift on hover with increased shadow
- Subtle border glow on hover
- Tilt effect following mouse (3D transform)
- Smooth transitions (200-300ms)
- Click feedback for interactive cards

### Form Interactions
**Guide users through forms:**
- Input focus states with border color change
- Floating labels that animate up
- Real-time validation with inline messages
- Success checkmarks for valid inputs
- Error states with shake animation
- Password strength indicators
- Character count for text areas

### Page Transitions
**Smooth between views:**
- Fade + slide for page changes
- Skeleton loaders during data fetch
- Optimistic UI updates
- Stagger animations for lists
- Route transition animations

---

## Mobile Responsiveness

### Mobile-First Approach
**Design for mobile, enhance for desktop:**
- Touch targets minimum 44x44px
- Generous padding and spacing
- Sticky bottom navigation on mobile
- Collapsible sections for long content
- Swipeable cards and galleries
- Pull-to-refresh where appropriate

### Responsive Patterns
**Adapt layouts intelligently:**
- Hamburger menu → full nav bar
- Card grid → stack on mobile
- Sidebar → drawer
- Multi-column → single column
- Data tables → card list
- Hide/show elements based on viewport

---

## Loading & Empty States

### Loading States
**Never leave users wondering:**
- Skeleton screens matching content layout
- Progress bars for known durations
- Animated placeholders
- Spinners only for short waits (<3s)
- Stagger loading for multiple elements
- Shimmer effects on skeletons

### Empty States
**Make empty states helpful:**
- Illustrations or icons
- Helpful copy explaining why it's empty
- Clear CTA to add first item
- Examples or suggestions
- No "no data" text alone

---

## Unique Elements to Stand Out

### Distinctive Features
**Add personality:**
- Custom cursor effects on landing pages
- Animated page numbers or section indicators
- Unusual hover effects (magnification, distortion)
- Custom scrollbars
- Glassmorphism for overlays
- Animated SVG icons
- Typewriter effects for hero text
- Confetti or celebration animations for actions

### Interactive Elements
**Engage users:**
- Drag-and-drop interfaces
- Sliders and range controls
- Toggle switches with animations
- Progress steps with animations
- Expandable/collapsible sections
- Tabs with slide indicators
- Image comparison sliders
- Interactive demos or playgrounds

---

## Consistency Rules

### Maintain Consistency
**What should stay consistent:**
- Spacing scale (4px, 8px, 16px, 24px, 32px, 48px, 64px)
- Border radius values
- Animation timing (200ms, 300ms, 500ms)
- Color system (primary, secondary, accent, neutrals)
- Typography scale
- Icon style (outline vs filled)
- Button styles across the app
- Form element styles

### What Can Vary
**Project-specific customization:**
- Color palette (different colors, same system)
- Layout creativity (grids, asymmetry)
- Illustration style
- Animation personality
- Feature-specific interactions
- Hero section design
- Card styling variations
- Background patterns or textures

---

## Technical Excellence

### Performance
- Optimize images (WebP, lazy loading)
- Code splitting for faster loads
- Debounce search inputs
- Virtualize long lists
- Minimize re-renders
- Use proper memoization

### Accessibility
- Keyboard navigation throughout
- ARIA labels where needed
- Focus indicators visible
- Screen reader friendly
- Sufficient color contrast
- Respect reduced motion preferences

---

## Key Principles

1. **Be Bold** - Don't be afraid to try unique layouts and interactions
2. **Be Consistent** - Use the same patterns for similar functions
3. **Be Responsive** - Design works beautifully on all devices
4. **Be Fast** - Animations are smooth, loading is quick
5. **Be Accessible** - Everyone can use what you build
6. **Be Modern** - Use current design trends and technologies
7. **Be Unique** - Each project should have its own personality
8. **Be Intuitive** - Users shouldn't need instructions


*IMPORTANT*: For every page or component refer to # Modern Design Best Practices

## Philosophy

Create unique, memorable experiences while maintaining consistency through modern design principles. Every project should feel distinct yet professional, innovative yet intuitive.

---

## Landing Pages & Marketing Sites

### Hero Sections
**Go beyond static backgrounds:**
- Animated gradients with subtle movement
- Particle systems or geometric shapes floating
- Interactive canvas backgrounds (Three.js, WebGL)
- Video backgrounds with proper fallbacks
- Parallax scrolling effects
- Gradient mesh animations
- Morphing blob animations


### Layout Patterns
**Use modern grid systems:**
- Bento grids (asymmetric card layouts)
- Masonry layouts for varied content
- Feature sections with diagonal cuts or curves
- Overlapping elements with proper z-index
- Split-screen designs with scroll-triggered reveals

**Avoid:** Traditional 3-column equal grids

### Scroll Animations
**Engage users as they scroll:**
- Fade-in and slide-up animations for sections
- Scroll-triggered parallax effects
- Progress indicators for long pages
- Sticky elements that transform on scroll
- Horizontal scroll sections for portfolios
- Text reveal animations (word by word, letter by letter)
- Number counters animating into view

**Avoid:** Static pages with no scroll interaction

### Call-to-Action Areas
**Make CTAs impossible to miss:**
- Gradient buttons with hover effects
- Floating action buttons with micro-interactions
- Animated borders or glowing effects
- Scale/lift on hover
- Interactive elements that respond to mouse position
- Pulsing indicators for primary actions

---

## Dashboard Applications

### Layout Structure
**Always use collapsible side navigation:**
- Sidebar that can collapse to icons only
- Smooth transition animations between states
- Persistent navigation state (remember user preference)
- Mobile: drawer that slides in/out
- Desktop: sidebar with expand/collapse toggle
- Icons visible even when collapsed

**Structure:**
```
/dashboard (layout wrapper with sidebar)
  /dashboard/overview
  /dashboard/analytics
  /dashboard/settings
  /dashboard/users
  /dashboard/projects
```

All dashboard pages should be nested inside the dashboard layout, not separate routes.

### Data Tables
**Modern table design:**
- Sticky headers on scroll
- Row hover states with subtle elevation
- Sortable columns with clear indicators
- Pagination with items-per-page control
- Search/filter with instant feedback
- Selection checkboxes with bulk actions
- Responsive: cards on mobile, table on desktop
- Loading skeletons, not spinners
- Empty states with illustrations or helpful text

**Use modern table libraries:**
- TanStack Table (React Table v8)
- AG Grid for complex data
- Data Grid from MUI (if using MUI)

### Charts & Visualizations
**Use the latest charting libraries:**
- Recharts (for React, simple charts)
- Chart.js v4 (versatile, well-maintained)
- Apache ECharts (advanced, interactive)
- D3.js (custom, complex visualizations)
- Tremor (for dashboards, built on Recharts)

**Chart best practices:**
- Animated transitions when data changes
- Interactive tooltips with detailed info
- Responsive sizing
- Color scheme matching design system
- Legend placement that doesn't obstruct data
- Loading states while fetching data

### Dashboard Cards
**Metric cards should stand out:**
- Gradient backgrounds or colored accents
- Trend indicators (↑ ↓ with color coding)
- Sparkline charts for historical data
- Hover effects revealing more detail
- Icon representing the metric
- Comparison to previous period

---

## Color & Visual Design

### Color Palettes
**Create depth with gradients:**
- Primary gradient (not just solid primary color)
- Subtle background gradients
- Gradient text for headings
- Gradient borders on cards
- Elevated surfaces for depth

**Color usage:**
- 60-30-10 rule (dominant, secondary, accent)
- Consistent semantic colors (success, warning, error)
- Accessible contrast ratios (WCAG AA minimum)

### Typography
**Create hierarchy through contrast:**
- Large, bold headings (48-72px for heroes)
- Clear size differences between levels
- Variable font weights (300, 400, 600, 700)
- Letter spacing for small caps
- Line height 1.5-1.7 for body text
- Inter, Poppins, or DM Sans for modern feel

### Shadows & Depth
**Layer UI elements:**
- Multi-layer shadows for realistic depth
- Colored shadows matching element color
- Elevated states on hover
- Neumorphism for special elements (sparingly)

---

## Interactions & Micro-animations

### Button Interactions
**Every button should react:**
- Scale slightly on hover (1.02-1.05)
- Lift with shadow on hover
- Ripple effect on click
- Loading state with spinner or progress
- Disabled state clearly visible
- Success state with checkmark animation

### Card Interactions
**Make cards feel alive:**
- Lift on hover with increased shadow
- Subtle border glow on hover
- Tilt effect following mouse (3D transform)
- Smooth transitions (200-300ms)
- Click feedback for interactive cards

### Form Interactions
**Guide users through forms:**
- Input focus states with border color change
- Floating labels that animate up
- Real-time validation with inline messages
- Success checkmarks for valid inputs
- Error states with shake animation
- Password strength indicators
- Character count for text areas

### Page Transitions
**Smooth between views:**
- Fade + slide for page changes
- Skeleton loaders during data fetch
- Optimistic UI updates
- Stagger animations for lists
- Route transition animations

---

## Mobile Responsiveness

### Mobile-First Approach
**Design for mobile, enhance for desktop:**
- Touch targets minimum 44x44px
- Generous padding and spacing
- Sticky bottom navigation on mobile
- Collapsible sections for long content
- Swipeable cards and galleries
- Pull-to-refresh where appropriate

### Responsive Patterns
**Adapt layouts intelligently:**
- Hamburger menu → full nav bar
- Card grid → stack on mobile
- Sidebar → drawer
- Multi-column → single column
- Data tables → card list
- Hide/show elements based on viewport

---

## Loading & Empty States

### Loading States
**Never leave users wondering:**
- Skeleton screens matching content layout
- Progress bars for known durations
- Animated placeholders
- Spinners only for short waits (<3s)
- Stagger loading for multiple elements
- Shimmer effects on skeletons

### Empty States
**Make empty states helpful:**
- Illustrations or icons
- Helpful copy explaining why it's empty
- Clear CTA to add first item
- Examples or suggestions
- No "no data" text alone

---

## Unique Elements to Stand Out

### Distinctive Features
**Add personality:**
- Custom cursor effects on landing pages
- Animated page numbers or section indicators
- Unusual hover effects (magnification, distortion)
- Custom scrollbars
- Glassmorphism for overlays
- Animated SVG icons
- Typewriter effects for hero text
- Confetti or celebration animations for actions

### Interactive Elements
**Engage users:**
- Drag-and-drop interfaces
- Sliders and range controls
- Toggle switches with animations
- Progress steps with animations
- Expandable/collapsible sections
- Tabs with slide indicators
- Image comparison sliders
- Interactive demos or playgrounds

---

## Consistency Rules

### Maintain Consistency
**What should stay consistent:**
- Spacing scale (4px, 8px, 16px, 24px, 32px, 48px, 64px)
- Border radius values
- Animation timing (200ms, 300ms, 500ms)
- Color system (primary, secondary, accent, neutrals)
- Typography scale
- Icon style (outline vs filled)
- Button styles across the app
- Form element styles

### What Can Vary
**Project-specific customization:**
- Color palette (different colors, same system)
- Layout creativity (grids, asymmetry)
- Illustration style
- Animation personality
- Feature-specific interactions
- Hero section design
- Card styling variations
- Background patterns or textures

---

## Technical Excellence

### Performance
- Optimize images (WebP, lazy loading)
- Code splitting for faster loads
- Debounce search inputs
- Virtualize long lists
- Minimize re-renders
- Use proper memoization

### Accessibility
- Keyboard navigation throughout
- ARIA labels where needed
- Focus indicators visible
- Screen reader friendly
- Sufficient color contrast
- Respect reduced motion preferences

---

## Key Principles

1. **Be Bold** - Don't be afraid to try unique layouts and interactions
2. **Be Consistent** - Use the same patterns for similar functions
3. **Be Responsive** - Design works beautifully on all devices
4. **Be Fast** - Animations are smooth, loading is quick
5. **Be Accessible** - Everyone can use what you build
6. **Be Modern** - Use current design trends and technologies
7. **Be Unique** - Each project should have its own personality
8. **Be Intuitive** - Users shouldn't need instructions
 for bestpractices and # Client Portal (No-login Link)

## Overview
Create a lightweight, branded, secure client portal page that is accessible via no-login shareable links. The page enables clients to review side-by-side design options, add threaded comments and inline annotations on media, and approve or request changes. An optional email capture with OTP provides verification. The feature set includes in-app, email, and optional SMS notifications, secure link generation with expiry/OTP, a high-fidelity visual side-by-side comparison viewer, and branding controls for studios (logo, accent colors, custom domain/prefix). All interactions are recorded with timestamps to form a reliable decision log. The solution should be mobile-first, accessible, and visually aligned with the Archject design language.

## Page Description ( Full Detail )
- What this page is:
  - A lightweight, branded client portal page opened via a secure no-login link that presents a single decision or project context. It enables clients to compare options visually, interact through comments and annotations, and approve or request changes. Optional OTP verification and optional email capture provide additional security verification without introducing heavy friction.
- Primary goals:
  - Deliver a simple, trusted, professional client experience that accelerates approvals, reduces miscommunication, and creates an auditable decision record.
  - Ensure branding consistency with the studio (logo, accent colors, and a custom domain/prefix if configured).
  - Provide a secure, shareable link workflow with expiry and optional OTP verification.
- Connected features:
  - Notifications & Reminders: In-app, email, and optional SMS to notify clients of pending approvals, new comments/annotations, and scheduled reminders.
  - Client Portal & No-login Links: Generate secure shareable links, each tied to a specific decision/project. Links can expire or require OTP verification.
  - Comments & Annotations: Threaded comments per option with inline media annotations; mentions to trigger studio notifications.
  - Visual Side-by-Side Comparison Viewer: Interactive, zoomable/pannable media viewer with annotation capabilities and mobile swipe support.
  - Workspace Branding & Custom Links: Studio branding (logo, accent colors), and ability to configure a custom domain or URL prefix for client-facing links.
- UI elements and how they should look:
  - Branded Header: Shows project/decision name, small branding cue (logo), brief instructions, and an optional help tip.
  - Compact Visual Compare: Mobile-first side-by-side layout that allows swiping between options, with clear option cards, thumbnails, and essential metadata.
  - Approve / Request Changes actions: Primary actions to approve or request changes; optional capture of client identity (name) and timestamp for the final decision record.
  - Commenting: Inline threaded comments tied to a specific option, with ability to @mention studio teammates and trigger notifications.
  - Annotations: Inline annotations over media (images, renders, PDFs) with lightweight tooling (draw/point/area) and exportable annotation data.
  - Verification Modal (optional): Email capture with OTP or minimal name capture to proceed; includes skip/remember option for future visits.
  - Share & Print: Display of link expiration, ability to export a PDF decision receipt, and a print-friendly view.
- Visual guidance:
  - Clean, generous whitespace, rounded cards, and soft shadows; consistent with Archject design language.
  - Focus on clarity and fast comprehension; minimal chrome, clear typographic hierarchy, and accessible controls.

## Components to Build
- ClientPortalNoLoginPage
  - Props: decisionId, brandingConfig (logoUrl, accentColor, customDomain), allowOtp, onApprove, onRequestChanges, onCommentAdded
  - Subcomponents: BrandedHeader, SideBySideViewer, OptionCard, CommentThread, AnnotationsOverlay, VerificationModal, NotificationTray, ShareExportBar
- VisualSideBySideViewer
  - Features: responsive two-column or stacked toggle for small screens; zoom/pan; per-option metadata; inline annotations; mobile swipe support; option actions (select, annotate, share)
- CommentThread
  - Features: threaded comments per option; inline mentions; notification toggles (notify studio)
- AnnotationsOverlay
  - Features: overlay annotations on media with creation, edit, delete; export of annotations; association to a given option
- VerificationModal
  - Features: email OTP workflow (optional), name capture fallback, remember device, skip option
- BrandingPanel (Workspace Branding)
  - Features: upload logo, set primary/secondary colors, domain/prefix configuration, preview, save
- LinkManager
  - Features: generate share link with expiry, OTP requirement flag, audit trail
- NotificationsCenter (In-app)
  - Features: render pending actions, comment mentions, reminder notifications; with per-user opt-in
- DecisionExport
  - Features: export decision as PDF/JSON; include options, comments, timestamps, approvals
- OperationSuccessModal/Page
  - Generic success state for actions like “share link created,” “export generated,” or “approval recorded”
- SampleOptionMediaPack (Asset)
  - Data: High-quality sample photography and rendered materials for demo onboarding
  - Integration: available to populate option media in demo flows

## Implementation Requirements

### Frontend
- UI components must be built in a modern framework consistent with the project (React/Next.js, or your chosen equivalent). Component library should support design tokens for colors, typography, spacing, and shadows.
- Accessibility:
  - ARIA roles for interactive components.
  - Keyboard navigability for all interactive elements.
  - color contrast per WCAG 2.1 AA (minimum 4.5:1 for text).
- Interactions:
  - Smooth transitions for modal openings, hover states, and state changes.
  - Drag-to-annotate or precise tapping for mobile annotations.
  - Responsive layout with a 2-column desktop view and single-column mobile view.
- Media handling:
  - Support images, PDFs, 3D renders (as images), and other media types in the viewer.
  - Efficient lazy loading for large media sets.
- State management:
  - Local UI state for client interactions; server-synced state for decisions, approvals, comments, and annotations.
  - Optimistic UI updates for immediate user feedback with rollback on errors.
- Theming:
  - Respect brandingConfig: logo URL, accent color, and optional custom domain/prefix for client links.
- Data persistence:
  - Client-side must be prepared to render the decision from a fetched payload (no-login session created unless OTP verification occurs).
- Security:
  - Ensure no-sensitive data is embedded in the no-login link beyond a securely generated token; the client view should verify token on load with a short expiry policy.
  - OTP flow should be optional and clearly communicated; avoid leaking PII through client-side code.

### Backend
- Endpoints (adjust to your stack):
  - GET /api/decisions/{decisionId}/no-login-view
    - Returns: decision metadata, options, media URLs, existing comments/annotations, branding config
  - POST /api/decisions/{decisionId}/approve
    - Body: { optionId, clientName, timestamp, otpVerified? }
  - POST /api/decisions/{decisionId}/comment
    - Body: { optionId, threadId, text, mentions[] }
  - POST /api/decisions/{decisionId}/annotation
    - Body: { optionId, mediaId, annotationData }
  - POST /api/links/generate
    - Body: { decisionId, expirySeconds, requireOtp, brandingOverride }
  - POST /api/verification/verify-otp
    - Body: { email, otp, decisionId }
  - GET /api/links/validate?token=...
  - GET /api/decisions/{decisionId}/export
    - Returns PDF/JSON
- Data models (simplified):
  - Decision
    - id, title, projectId, createdAt, updatedAt, options[]. id, title, description, media[]
  - Option
    - id, title, details, mediaUrls[], annotations[]
  - Comment
    - id, optionId, authorId, text, createdAt, mentions[]
  - Annotation
    - id, optionId, mediaId, data (shape, note, color), createdAt
  - Link
    - token, decisionId, expiresAt, requiresOtp, branding
  - Branding
    - logoUrl, accentColor, domainPrefix, customDomain
  - Notification
    - id, type, recipient, readAt, payload
- Data integrity:
  - Ensure references are consistent across decisions, options, comments, and annotations.
  - Audit trail of approvals, rejections, and changes with timestamps.
- Security:
  - OTP workflow should be stateless on the client side but validated server-side; use time-bound tokens, rate-limiting for OTP requests.
  - No-login links should be non-guessable (secure tokens with sufficient entropy) and have expiry.
  - Access control checks on all write endpoints, even for no-login contexts.
- Performance:
  - Efficient paging or virtualization for large option sets.
  - Media delivery optimized by CDN; provide progressive image loading.

### Integration
- Frontend ↔ Backend:
  - Fetch decision data on load via no-login API; render options, media, comments, and annotations.
  - Post user actions (approve, comment, annotate) to respective endpoints; reflect changes in UI optimistically.
  - Verification flow: if OTP required, present VerificationModal; upon success, load or unlock write actions.
- Branding integration:
  - The UI should render with brandingConfig provided by the backend (logo, accent color). All primary actions must adopt the accent color.
- Notifications:
  - A background notification service is responsible for email/SMS/in-app alerts; the client portal should subscribe to relevant events and display in-app notifications.
- Exports:
  - Ensure exports include all decision data, options, comments, timestamps, and approval history.

## User Experience Flow
1. Studio creates a decision with multiple options and media; branding is configured; a secure no-login link is generated with optional OTP.
2. Client receives a shareable link (via email or other channel) and opens it on mobile or desktop.
3. Client sees a branded header, the decision title, and a compact visual side-by-side comparison of options.
4. Client can:
   - View media, switch between options, and zoom/pan/annotate.
   - Add threaded comments per option; mention studio teammates to trigger notifications.
   - Add inline annotations on media; save annotations that sync to the decision.
   - Approve a selected option or request changes; optionally provide client name and timestamp.
   - Verify identity via OTP (if enabled) or skip verification if allowed.
5. If verification is used, the client receives an OTP and validates; once verified, they can finalize approvals.
6. Studio receives notifications for new comments, approvals, or change requests; reminders can be scheduled to nudge clients.
7. Client can choose to print or export a decision receipt (PDF/JSON) for their records.
8. The link can be set to expire or require OTP; access is restricted after expiry.
9. All actions update an auditable decision log accessible via the internal editor (Decision Detail Internal) and exportable.

## Technical Specifications

### Data Models (Schema Details)
- Decision
  - id: string
  - title: string
  - projectId: string
  - createdAt: timestamp
  - updatedAt: timestamp
  - options: Option[]
  - mediaAssets: MediaAsset[]
  - approvals: ApprovalRecord[]
  - links: Link[]
  - branding: Branding
- Option
  - id: string
  - title: string
  - description: string
  - mediaUrls: string[]
  - annotations: Annotation[]
- MediaAsset
  - id: string
  - type: enum(image, pdf, render, etc)
  - url: string
  - metadata: object
- Annotation
  - id: string
  - optionId: string
  - mediaId: string
  - shape: object (coordinates, type)
  - note: string
  - color: string
  - createdAt: timestamp
- Comment
  - id: string
  - optionId: string
  - authorId: string
  - text: string
  - createdAt: timestamp
  - mentions: string[]
- ApprovalRecord
  - id: string
  - optionId: string
  - approved: boolean
  - clientName: string
  - timestamp: timestamp
- Link
  - token: string
  - decisionId: string
  - expiresAt: timestamp
  - requiresOtp: boolean
  - brandingOverride: Branding
- Branding
  - logoUrl: string
  - accentColor: string
  - domainPrefix: string
  - customDomain: string

### API Endpoints
- GET /api/decisions/{decisionId}/no-login-view
  - Response: { decision, options, mediaAssets, comments, annotations, branding }
- POST /api/decisions/{decisionId}/approve
  - Body: { optionId, clientName, timestamp, otpVerified }
- POST /api/decisions/{decisionId}/comment
  - Body: { optionId, text, mentions, threadId }
- POST /api/decisions/{decisionId}/annotation
  - Body: { optionId, mediaId, annotationData }
- POST /api/links/generate
  - Body: { decisionId, expirySeconds, requireOtp, brandingOverride }
  - Response: { token, expiresAt, requireOtp }
- POST /api/verification/verify-otp
  - Body: { email, otp, decisionId }
- GET /api/links/validate?token=...
- GET /api/decisions/{decisionId}/export
  - Response: PDF/JSON blob
- GET /api/samples/option-media-pack
  - Response: sampleOptionMediaPack data

### Security
- No-login access uses secure, non-guessable tokens with expiry. OTP (if enabled) validates the user identity before allowing actions.
- All write actions are authenticated or OTP-verified; internal admin endpoints require proper authentication.
- Data at rest and in transit must be encrypted; sensitive logs should be redacted.

### Validation
- Input validation on all endpoints (string length, required fields, media URL validation).
- OTP flow must handle rate limiting and correct OTP verification before granting write access.
- Brand config must validate color codes and domain prefixes before saving.

## Acceptance Criteria
- [ ] Client Portal No-login page loads for a given decision with correct branding, media, and options; side-by-side view is responsive and interactive.
- [ ] Users can add comments per option with threaded replies; mentions generate in-app notifications.
- [ ] Users can add annotations on media; annotations are saved and visible to all participants.
- [ ] User can approve a selected option or request changes; approvals are timestamped and stored.
- [ ] Optional OTP verification flow works: OTP is sent, verified, and allows subsequent actions; without OTP, feature gracefully falls back to non-verified mode if configured.
- [ ] Secure share link can be generated with expiry and optional OTP requirement; validation endpoint works and denies access post-expiry.
- [ ] Notification system delivers in-app and email alerts for pending approvals and new comments; optional SMS if enabled.
- [ ] Decision export functionality produces a complete PDF/JSON receipt with timing and audit data.
- [ ] Branding controls apply logo and accent color consistently across all UI components; custom domain/prefix renders correctly in the client link.
- [ ] Operation Success Page / Modal appears after link creation, export generation, or payment completion with clear next steps.

## UI/UX Guidelines
Apply the project's design system:
- Follow the Visual Style, Color Palette, Typography, and Layout guidelines provided.
- Cards: white with soft shadows, rounded corners, 24px+ internal padding, 12-16px radii, hover elevation.
- Navigation: top pill-shaped active state in deep green (#195C4A); white text on active; right-aligned user actions.
- Data Visualization: clean line charts, minimal grid; status badges for deltas; consistent card styling.
- Interactive Elements: pill buttons; primary actions in deep green; hover and focus states with subtle shadows; rounded inputs with soft backgrounds.
- Typography: Inter/Manrope-like sans-serif; 400 body, 500 labels/navigation, 600 headings/actions.
- Mobile-first: large touch targets, swipe support for media viewer, single-column stacking on small screens.

## Visual Style (Reiterated)
- Color Palette, Typography, Card Design, Navigation, Data Visualization, Interactive Elements as specified above.
- Ensure a calm, professional, accessible, and brand-consistent experience that conveys trust and clarity in client approvals.

## Asset: Sample Option Media Pack
- Include a ready-to-use pack of high-quality sample photography and rendered materials for onboarding flows.
- Provide an API or static access method to fetch sample media for demos, ensuring the viewer can render sample options side-by-side.

## Connected Pages
- Decision Detail (Internal): Internal view with full decision data, all options, side-by-side comparison, comments/annotations, approval history, and admin actions (edit, revoke, export).
- Operation Success Page / Modal: Generic success state after operations like share link creation, export generation, or payment completion.

## Deliverables
- Fully wired frontend implementation (no-login client portal) with all components, state management, and UI interactions.
- Backend API stubs or implemented endpoints as described, with proper data models and security.
- Documentation:
  - Setup guide for branding and link generation.
  - API contract details, payload schemas, and example requests/responses.
  - UX flow diagrams and user journey notes.
- Testing:
  - Unit tests for core components and API handlers.
  - E2E tests for the no-login flow: link load, OTP flow, comment flow, annotation flow, approve flow, and export flow.
- Deployment notes:
  - How to enable OTP, set branding defaults, and configure custom domains/prefixes for client links.
  - Feature flags to enable/disable no-login OTP and notification channels.

If you’d like, I can tailor this prompt to a specific tech stack (e.g., Next.js + PostgreSQL + Redis, or a serverless approach with AWS/Azure) and include concrete file/folder structures, data migrations, and CI/CD steps. for style.

CRITICAL DESIGN REQUIREMENTS:
- You MUST follow ALL design principles and patterns specified in the Design Reference above
- Do NOT deviate from the design specifications without explicit user permission
- Implement ALL visual design elements (colors, typography, spacing, shadows, animations) as specified
- Follow the layout patterns and component designs exactly as documented
- Ensure all interactions and micro-animations match the reference specifications

CRITICAL TECHNICAL REQUIREMENTS:
- React 18.3.1, React Router 6.30.1
- Tailwind CSS v3 with tailwind.config.js and custom keyframes
- @tailwindcss/typography plugin for rich text content
- Tailwind CSS animations (NOT Motion library or framer-motion)
- Sonner for toasts
- Recharts for data visualization
- Native fetch() with API utilities in src/lib/api.ts
- Design system with CSS custom properties
- Use RGB color values for theming
- When Supabase is configured: use Edge Functions for LLM and server-only logic; never expose API keys in the client

=== TASK ===
# Client Portal (No-login Link)

## Overview
Create a lightweight, branded, secure client portal page that is accessible via no-login shareable links. The page enables clients to review side-by-side design options, add threaded comments and inline annotations on media, and approve or request changes. An optional email capture with OTP provides verification. The feature set includes in-app, email, and optional SMS notifications, secure link generation with expiry/OTP, a high-fidelity visual side-by-side comparison viewer, and branding controls for studios (logo, accent colors, custom domain/prefix). All interactions are recorded with timestamps to form a reliable decision log. The solution should be mobile-first, accessible, and visually aligned with the Archject design language.

## Page Description ( Full Detail )
- What this page is:
  - A lightweight, branded client portal page opened via a secure no-login link that presents a single decision or project context. It enables clients to compare options visually, interact through comments and annotations, and approve or request changes. Optional OTP verification and optional email capture provide additional security verification without introducing heavy friction.
- Primary goals:
  - Deliver a simple, trusted, professional client experience that accelerates approvals, reduces miscommunication, and creates an auditable decision record.
  - Ensure branding consistency with the studio (logo, accent colors, and a custom domain/prefix if configured).
  - Provide a secure, shareable link workflow with expiry and optional OTP verification.
- Connected features:
  - Notifications & Reminders: In-app, email, and optional SMS to notify clients of pending approvals, new comments/annotations, and scheduled reminders.
  - Client Portal & No-login Links: Generate secure shareable links, each tied to a specific decision/project. Links can expire or require OTP verification.
  - Comments & Annotations: Threaded comments per option with inline media annotations; mentions to trigger studio notifications.
  - Visual Side-by-Side Comparison Viewer: Interactive, zoomable/pannable media viewer with annotation capabilities and mobile swipe support.
  - Workspace Branding & Custom Links: Studio branding (logo, accent colors), and ability to configure a custom domain or URL prefix for client-facing links.
- UI elements and how they should look:
  - Branded Header: Shows project/decision name, small branding cue (logo), brief instructions, and an optional help tip.
  - Compact Visual Compare: Mobile-first side-by-side layout that allows swiping between options, with clear option cards, thumbnails, and essential metadata.
  - Approve / Request Changes actions: Primary actions to approve or request changes; optional capture of client identity (name) and timestamp for the final decision record.
  - Commenting: Inline threaded comments tied to a specific option, with ability to @mention studio teammates and trigger notifications.
  - Annotations: Inline annotations over media (images, renders, PDFs) with lightweight tooling (draw/point/area) and exportable annotation data.
  - Verification Modal (optional): Email capture with OTP or minimal name capture to proceed; includes skip/remember option for future visits.
  - Share & Print: Display of link expiration, ability to export a PDF decision receipt, and a print-friendly view.
- Visual guidance:
  - Clean, generous whitespace, rounded cards, and soft shadows; consistent with Archject design language.
  - Focus on clarity and fast comprehension; minimal chrome, clear typographic hierarchy, and accessible controls.

## Components to Build
- ClientPortalNoLoginPage
  - Props: decisionId, brandingConfig (logoUrl, accentColor, customDomain), allowOtp, onApprove, onRequestChanges, onCommentAdded
  - Subcomponents: BrandedHeader, SideBySideViewer, OptionCard, CommentThread, AnnotationsOverlay, VerificationModal, NotificationTray, ShareExportBar
- VisualSideBySideViewer
  - Features: responsive two-column or stacked toggle for small screens; zoom/pan; per-option metadata; inline annotations; mobile swipe support; option actions (select, annotate, share)
- CommentThread
  - Features: threaded comments per option; inline mentions; notification toggles (notify studio)
- AnnotationsOverlay
  - Features: overlay annotations on media with creation, edit, delete; export of annotations; association to a given option
- VerificationModal
  - Features: email OTP workflow (optional), name capture fallback, remember device, skip option
- BrandingPanel (Workspace Branding)
  - Features: upload logo, set primary/secondary colors, domain/prefix configuration, preview, save
- LinkManager
  - Features: generate share link with expiry, OTP requirement flag, audit trail
- NotificationsCenter (In-app)
  - Features: render pending actions, comment mentions, reminder notifications; with per-user opt-in
- DecisionExport
  - Features: export decision as PDF/JSON; include options, comments, timestamps, approvals
- OperationSuccessModal/Page
  - Generic success state for actions like “share link created,” “export generated,” or “approval recorded”
- SampleOptionMediaPack (Asset)
  - Data: High-quality sample photography and rendered materials for demo onboarding
  - Integration: available to populate option media in demo flows

## Implementation Requirements

### Frontend
- UI components must be built in a modern framework consistent with the project (React/Next.js, or your chosen equivalent). Component library should support design tokens for colors, typography, spacing, and shadows.
- Accessibility:
  - ARIA roles for interactive components.
  - Keyboard navigability for all interactive elements.
  - color contrast per WCAG 2.1 AA (minimum 4.5:1 for text).
- Interactions:
  - Smooth transitions for modal openings, hover states, and state changes.
  - Drag-to-annotate or precise tapping for mobile annotations.
  - Responsive layout with a 2-column desktop view and single-column mobile view.
- Media handling:
  - Support images, PDFs, 3D renders (as images), and other media types in the viewer.
  - Efficient lazy loading for large media sets.
- State management:
  - Local UI state for client interactions; server-synced state for decisions, approvals, comments, and annotations.
  - Optimistic UI updates for immediate user feedback with rollback on errors.
- Theming:
  - Respect brandingConfig: logo URL, accent color, and optional custom domain/prefix for client links.
- Data persistence:
  - Client-side must be prepared to render the decision from a fetched payload (no-login session created unless OTP verification occurs).
- Security:
  - Ensure no-sensitive data is embedded in the no-login link beyond a securely generated token; the client view should verify token on load with a short expiry policy.
  - OTP flow should be optional and clearly communicated; avoid leaking PII through client-side code.

### Backend
- Endpoints (adjust to your stack):
  - GET /api/decisions/{decisionId}/no-login-view
    - Returns: decision metadata, options, media URLs, existing comments/annotations, branding config
  - POST /api/decisions/{decisionId}/approve
    - Body: { optionId, clientName, timestamp, otpVerified? }
  - POST /api/decisions/{decisionId}/comment
    - Body: { optionId, threadId, text, mentions[] }
  - POST /api/decisions/{decisionId}/annotation
    - Body: { optionId, mediaId, annotationData }
  - POST /api/links/generate
    - Body: { decisionId, expirySeconds, requireOtp, brandingOverride }
  - POST /api/verification/verify-otp
    - Body: { email, otp, decisionId }
  - GET /api/links/validate?token=...
  - GET /api/decisions/{decisionId}/export
    - Returns PDF/JSON
- Data models (simplified):
  - Decision
    - id, title, projectId, createdAt, updatedAt, options[]. id, title, description, media[]
  - Option
    - id, title, details, mediaUrls[], annotations[]
  - Comment
    - id, optionId, authorId, text, createdAt, mentions[]
  - Annotation
    - id, optionId, mediaId, data (shape, note, color), createdAt
  - Link
    - token, decisionId, expiresAt, requiresOtp, branding
  - Branding
    - logoUrl, accentColor, domainPrefix, customDomain
  - Notification
    - id, type, recipient, readAt, payload
- Data integrity:
  - Ensure references are consistent across decisions, options, comments, and annotations.
  - Audit trail of approvals, rejections, and changes with timestamps.
- Security:
  - OTP workflow should be stateless on the client side but validated server-side; use time-bound tokens, rate-limiting for OTP requests.
  - No-login links should be non-guessable (secure tokens with sufficient entropy) and have expiry.
  - Access control checks on all write endpoints, even for no-login contexts.
- Performance:
  - Efficient paging or virtualization for large option sets.
  - Media delivery optimized by CDN; provide progressive image loading.

### Integration
- Frontend ↔ Backend:
  - Fetch decision data on load via no-login API; render options, media, comments, and annotations.
  - Post user actions (approve, comment, annotate) to respective endpoints; reflect changes in UI optimistically.
  - Verification flow: if OTP required, present VerificationModal; upon success, load or unlock write actions.
- Branding integration:
  - The UI should render with brandingConfig provided by the backend (logo, accent color). All primary actions must adopt the accent color.
- Notifications:
  - A background notification service is responsible for email/SMS/in-app alerts; the client portal should subscribe to relevant events and display in-app notifications.
- Exports:
  - Ensure exports include all decision data, options, comments, timestamps, and approval history.

## User Experience Flow
1. Studio creates a decision with multiple options and media; branding is configured; a secure no-login link is generated with optional OTP.
2. Client receives a shareable link (via email or other channel) and opens it on mobile or desktop.
3. Client sees a branded header, the decision title, and a compact visual side-by-side comparison of options.
4. Client can:
   - View media, switch between options, and zoom/pan/annotate.
   - Add threaded comments per option; mention studio teammates to trigger notifications.
   - Add inline annotations on media; save annotations that sync to the decision.
   - Approve a selected option or request changes; optionally provide client name and timestamp.
   - Verify identity via OTP (if enabled) or skip verification if allowed.
5. If verification is used, the client receives an OTP and validates; once verified, they can finalize approvals.
6. Studio receives notifications for new comments, approvals, or change requests; reminders can be scheduled to nudge clients.
7. Client can choose to print or export a decision receipt (PDF/JSON) for their records.
8. The link can be set to expire or require OTP; access is restricted after expiry.
9. All actions update an auditable decision log accessible via the internal editor (Decision Detail Internal) and exportable.

## Technical Specifications

### Data Models (Schema Details)
- Decision
  - id: string
  - title: string
  - projectId: string
  - createdAt: timestamp
  - updatedAt: timestamp
  - options: Option[]
  - mediaAssets: MediaAsset[]
  - approvals: ApprovalRecord[]
  - links: Link[]
  - branding: Branding
- Option
  - id: string
  - title: string
  - description: string
  - mediaUrls: string[]
  - annotations: Annotation[]
- MediaAsset
  - id: string
  - type: enum(image, pdf, render, etc)
  - url: string
  - metadata: object
- Annotation
  - id: string
  - optionId: string
  - mediaId: string
  - shape: object (coordinates, type)
  - note: string
  - color: string
  - createdAt: timestamp
- Comment
  - id: string
  - optionId: string
  - authorId: string
  - text: string
  - createdAt: timestamp
  - mentions: string[]
- ApprovalRecord
  - id: string
  - optionId: string
  - approved: boolean
  - clientName: string
  - timestamp: timestamp
- Link
  - token: string
  - decisionId: string
  - expiresAt: timestamp
  - requiresOtp: boolean
  - brandingOverride: Branding
- Branding
  - logoUrl: string
  - accentColor: string
  - domainPrefix: string
  - customDomain: string

### API Endpoints
- GET /api/decisions/{decisionId}/no-login-view
  - Response: { decision, options, mediaAssets, comments, annotations, branding }
- POST /api/decisions/{decisionId}/approve
  - Body: { optionId, clientName, timestamp, otpVerified }
- POST /api/decisions/{decisionId}/comment
  - Body: { optionId, text, mentions, threadId }
- POST /api/decisions/{decisionId}/annotation
  - Body: { optionId, mediaId, annotationData }
- POST /api/links/generate
  - Body: { decisionId, expirySeconds, requireOtp, brandingOverride }
  - Response: { token, expiresAt, requireOtp }
- POST /api/verification/verify-otp
  - Body: { email, otp, decisionId }
- GET /api/links/validate?token=...
- GET /api/decisions/{decisionId}/export
  - Response: PDF/JSON blob
- GET /api/samples/option-media-pack
  - Response: sampleOptionMediaPack data

### Security
- No-login access uses secure, non-guessable tokens with expiry. OTP (if enabled) validates the user identity before allowing actions.
- All write actions are authenticated or OTP-verified; internal admin endpoints require proper authentication.
- Data at rest and in transit must be encrypted; sensitive logs should be redacted.

### Validation
- Input validation on all endpoints (string length, required fields, media URL validation).
- OTP flow must handle rate limiting and correct OTP verification before granting write access.
- Brand config must validate color codes and domain prefixes before saving.

## Acceptance Criteria
- [ ] Client Portal No-login page loads for a given decision with correct branding, media, and options; side-by-side view is responsive and interactive.
- [ ] Users can add comments per option with threaded replies; mentions generate in-app notifications.
- [ ] Users can add annotations on media; annotations are saved and visible to all participants.
- [ ] User can approve a selected option or request changes; approvals are timestamped and stored.
- [ ] Optional OTP verification flow works: OTP is sent, verified, and allows subsequent actions; without OTP, feature gracefully falls back to non-verified mode if configured.
- [ ] Secure share link can be generated with expiry and optional OTP requirement; validation endpoint works and denies access post-expiry.
- [ ] Notification system delivers in-app and email alerts for pending approvals and new comments; optional SMS if enabled.
- [ ] Decision export functionality produces a complete PDF/JSON receipt with timing and audit data.
- [ ] Branding controls apply logo and accent color consistently across all UI components; custom domain/prefix renders correctly in the client link.
- [ ] Operation Success Page / Modal appears after link creation, export generation, or payment completion with clear next steps.

## UI/UX Guidelines
Apply the project's design system:
- Follow the Visual Style, Color Palette, Typography, and Layout guidelines provided.
- Cards: white with soft shadows, rounded corners, 24px+ internal padding, 12-16px radii, hover elevation.
- Navigation: top pill-shaped active state in deep green (#195C4A); white text on active; right-aligned user actions.
- Data Visualization: clean line charts, minimal grid; status badges for deltas; consistent card styling.
- Interactive Elements: pill buttons; primary actions in deep green; hover and focus states with subtle shadows; rounded inputs with soft backgrounds.
- Typography: Inter/Manrope-like sans-serif; 400 body, 500 labels/navigation, 600 headings/actions.
- Mobile-first: large touch targets, swipe support for media viewer, single-column stacking on small screens.

## Visual Style (Reiterated)
- Color Palette, Typography, Card Design, Navigation, Data Visualization, Interactive Elements as specified above.
- Ensure a calm, professional, accessible, and brand-consistent experience that conveys trust and clarity in client approvals.

## Asset: Sample Option Media Pack
- Include a ready-to-use pack of high-quality sample photography and rendered materials for onboarding flows.
- Provide an API or static access method to fetch sample media for demos, ensuring the viewer can render sample options side-by-side.

## Connected Pages
- Decision Detail (Internal): Internal view with full decision data, all options, side-by-side comparison, comments/annotations, approval history, and admin actions (edit, revoke, export).
- Operation Success Page / Modal: Generic success state after operations like share link creation, export generation, or payment completion.

## Deliverables
- Fully wired frontend implementation (no-login client portal) with all components, state management, and UI interactions.
- Backend API stubs or implemented endpoints as described, with proper data models and security.
- Documentation:
  - Setup guide for branding and link generation.
  - API contract details, payload schemas, and example requests/responses.
  - UX flow diagrams and user journey notes.
- Testing:
  - Unit tests for core components and API handlers.
  - E2E tests for the no-login flow: link load, OTP flow, comment flow, annotation flow, approve flow, and export flow.
- Deployment notes:
  - How to enable OTP, set branding defaults, and configure custom domains/prefixes for client links.
  - Feature flags to enable/disable no-login OTP and notification channels.

If you’d like, I can tailor this prompt to a specific tech stack (e.g., Next.js + PostgreSQL + Redis, or a serverless approach with AWS/Azure) and include concrete file/folder structures, data migrations, and CI/CD steps.

=== SUCCESS CRITERIA ===
# Success Criteria Checklist

## Code Quality

### TypeScript
- [ ] No TypeScript errors (`tsc --noEmit` passes)
- [ ] All functions and components have proper type definitions
- [ ] No `any` types used (use `unknown` if type is truly unknown)
- [ ] Props interfaces defined for all components
- [ ] API responses have type definitions

### Code Standards
- [ ] All imports use path aliases (@/ prefix)
- [ ] Components follow the established naming convention
- [ ] Files are organized in correct directories
- [ ] No unused imports or variables
- [ ] Consistent code formatting

## Component Implementation

### UI Components
- [ ] Use shadcn/ui components (Button, Card, Input, etc.) instead of building from scratch
- [ ] All interactive elements have hover states
- [ ] Components use the `cn()` utility for class merging
- [ ] Proper TypeScript props interfaces defined
- [ ] Components are responsive (mobile, tablet, desktop)

### Animations
- [ ] Motion library used for all animations (NOT framer-motion)
- [ ] Page transitions implemented with fade/slide
- [ ] Interactive elements have whileHover/whileTap animations
- [ ] List items use stagger animations where appropriate
- [ ] Animations respect `prefers-reduced-motion`

### Icons
- [ ] Lucide React icons used consistently
- [ ] Icons have consistent sizing (h-4 w-4, h-5 w-5, h-6 w-6)
- [ ] Icon colors match design system (text-primary, text-muted-foreground)

## Data Management

### React Query
- [ ] All data fetching uses React Query hooks
- [ ] Query keys follow the established pattern
- [ ] Mutations invalidate related queries
- [ ] Loading and error states handled
- [ ] Optimistic updates implemented where appropriate

### Forms
- [ ] Forms use react-hook-form
- [ ] Validation uses Zod schemas
- [ ] Error messages display properly
- [ ] Form submission shows loading state
- [ ] Success/error feedback via toast notifications

### API Layer
- [ ] API functions in src/api/ directory
- [ ] Axios used for HTTP requests
- [ ] Proper error handling with try/catch
- [ ] Auth tokens handled by interceptors
- [ ] Type-safe API function signatures

## User Experience

### Notifications
- [ ] Sonner toasts used for all notifications
- [ ] Success actions show success toast
- [ ] Errors show descriptive error messages
- [ ] Loading states show toast.loading()

### Loading States
- [ ] Skeleton loaders shown during data fetch
- [ ] Buttons show loading state during submission
- [ ] Disabled state applied during async operations

### Error Handling
- [ ] Network errors caught and displayed
- [ ] User-friendly error messages (no stack traces)
- [ ] Fallback UI for error states
- [ ] No unhandled promise rejections

## Navigation

### Route Accessibility
- [ ] All pages have routes defined in router configuration
- [ ] Every page is accessible through navigation (menu, sidebar, or direct URL)
- [ ] Main pages (Dashboard, Home, Settings, etc.) accessible from primary navigation
- [ ] Secondary pages accessible through contextual navigation or direct links
- [ ] Deep-linked pages have breadcrumbs or back navigation
- [ ] 404/Not Found page implemented for invalid routes
- [ ] Protected routes have proper authentication checks
- [ ] Navigation state persists across page refreshes where appropriate

### Navigation UX
- [ ] Active route highlighted in navigation menu
- [ ] Clear visual hierarchy in navigation structure
- [ ] Mobile navigation is accessible and usable
- [ ] Navigation items have hover/focus states
- [ ] Nested routes show parent-child relationships
- [ ] User can always return to main areas (Dashboard/Home)

## Styling

### Tailwind CSS
- [ ] Tailwind v3 classes used
- [ ] HSL color variables from design system
- [ ] Custom CSS properties used where defined
- [ ] Responsive breakpoints: mobile-first approach
- [ ] Dark mode support via CSS variables

### Design System
- [ ] Colors use theme variables (primary, secondary, accent)
- [ ] Spacing uses Tailwind scale (p-4, gap-6, etc.)
- [ ] Border radius uses theme values (rounded-lg)
- [ ] Shadows use theme values (shadow-card)
- [ ] Typography follows Inter font system

## Accessibility

- [ ] Semantic HTML elements used
- [ ] Buttons have descriptive labels
- [ ] Forms have proper labels
- [ ] Focus states visible on interactive elements
- [ ] Color contrast meets WCAG standards

## Performance

- [ ] No console.log statements in production code
- [ ] No console errors in browser
- [ ] Images optimized (WebP, lazy loading)
- [ ] Large lists use virtualization if needed
- [ ] React Query cache configured appropriately

## Testing Readiness

- [ ] Components structured for easy testing
- [ ] Business logic separated from presentation
- [ ] Mock-friendly API layer
- [ ] No hardcoded values that should be configurable
- [ ] Environment variables properly configured

## Final Checks

- [ ] Code builds without errors (`npm run build`)
- [ ] Development server runs without errors (`npm run dev`)
- [ ] No TypeScript errors in editor
- [ ] Browser console is clean (no errors or warnings)
- [ ] All functionality works as expected
- [ ] Code follows existing project patterns
- [ ] Changes are consistent with the rest of the codebase



IMPORTANT: ALL styling and design decisions must follow the Design Reference section above EXACTLY. Do not make arbitrary design choices.

Analyze the existing project structure and implement the task following the patterns already established. Ensure all success criteria are met.